<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Times - Singapore</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            color: #fbbf24;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 289px;
            background: rgba(6, 78, 59, 0.95);
            border: 3px solid #fbbf24;
            border-radius: 20px;
            padding: 25px 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(251, 191, 36, 0.05) 0%, transparent 70%);
            pointer-events: none;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }

        .ornament {
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #fbbf24, transparent);
            margin: 10px auto;
        }

        .title {
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .location {
            font-size: 12px;
            color: #d4af37;
            letter-spacing: 1px;
        }

        .next-prayer {
            background: linear-gradient(135deg, #047857 0%, #065f46 100%);
            border: 2px solid #fbbf24;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .next-prayer-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            color: #d4af37;
        }

        .next-prayer-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .countdown {
            font-size: 24px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            color: #fcd34d;
            text-shadow: 0 0 10px rgba(252, 211, 77, 0.3);
        }

        .prayer-times {
            position: relative;
        }

        .prayer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 10px;
            background: rgba(4, 120, 87, 0.3);
            border-radius: 10px;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .prayer-item:hover {
            background: rgba(4, 120, 87, 0.5);
            transform: translateX(5px);
        }

        .prayer-item.active {
            background: rgba(251, 191, 36, 0.2);
            border-left-color: #fbbf24;
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.3);
        }

        .prayer-name {
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .prayer-time {
            font-size: 16px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #fcd34d;
        }

        .footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid rgba(251, 191, 36, 0.3);
        }

        .current-time {
            font-size: 11px;
            color: #d4af37;
            letter-spacing: 1px;
        }

        .date {
            font-size: 10px;
            color: #a78948;
            margin-top: 5px;
        }

        @media (min-width: 400px) {
            .container {
                max-width: 350px;
                padding: 30px 25px;
            }
            
            .title {
                font-size: 24px;
            }
            
            .prayer-name, .prayer-time {
                font-size: 18px;
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="ornament"></div>
            <div class="title">Prayer Times</div>
            <div class="location">Singapore (MUIS)</div>
            <div class="ornament"></div>
        </div>

        <div class="next-prayer">
            <div class="next-prayer-label">Next Prayer</div>
            <div class="next-prayer-name" id="nextPrayerName">Loading...</div>
            <div class="countdown" id="countdown">--:--:--</div>
        </div>

        <div class="prayer-times">
            <div class="prayer-item" id="fajr-item">
                <span class="prayer-name">Fajr</span>
                <span class="prayer-time" id="fajr">--:--</span>
            </div>
            <div class="prayer-item" id="dhuhr-item">
                <span class="prayer-name">Dhuhr</span>
                <span class="prayer-time" id="dhuhr">--:--</span>
            </div>
            <div class="prayer-item" id="asr-item">
                <span class="prayer-name">Asr</span>
                <span class="prayer-time" id="asr">--:--</span>
            </div>
            <div class="prayer-item" id="maghrib-item">
                <span class="prayer-name">Maghrib</span>
                <span class="prayer-time" id="maghrib">--:--</span>
            </div>
            <div class="prayer-item" id="isha-item">
                <span class="prayer-name">Isha</span>
                <span class="prayer-time" id="isha">--:--</span>
            </div>
        </div>

        <div class="footer">
            <div class="current-time" id="currentTime">--:--:--</div>
            <div class="date" id="currentDate">Loading...</div>
        </div>
    </div>

    <script>
        // Singapore coordinates
        const LAT = 1.3521;
        const LNG = 103.8198;

        // Prayer calculation using simplified algorithm for Singapore/MUIS method
        function calculatePrayerTimes(date) {
            const times = {};
            const jd = julianDate(date);
            const eqt = equationOfTime(jd);
            const decl = sunDeclination(jd);
            
            // MUIS uses specific angles
            times.fajr = computeTime(20, 'fajr', date, eqt, decl);
            times.dhuhr = computeTime(0, 'dhuhr', date, eqt, decl);
            times.asr = computeTime(0, 'asr', date, eqt, decl);
            times.maghrib = computeTime(1, 'maghrib', date, eqt, decl);
            times.isha = computeTime(18, 'isha', date, eqt, decl);
            
            return times;
        }

        function julianDate(date) {
            const y = date.getFullYear();
            const m = date.getMonth() + 1;
            const d = date.getDate();
            
            if (m <= 2) {
                return Math.floor(365.25 * (y - 1)) + Math.floor(30.6001 * (m + 13)) + d + 1720995;
            }
            return Math.floor(365.25 * y) + Math.floor(30.6001 * (m + 1)) + d + 1720995;
        }

        function equationOfTime(jd) {
            const d = jd - 2451545.0;
            const g = 357.529 + 0.98560028 * d;
            const q = 280.459 + 0.98564736 * d;
            const l = q + 1.915 * Math.sin(g * Math.PI / 180) + 0.020 * Math.sin(2 * g * Math.PI / 180);
            const e = -1.915 * Math.sin(g * Math.PI / 180) - 0.020 * Math.sin(2 * g * Math.PI / 180) + 2.466 * Math.sin(2 * l * Math.PI / 180) - 0.053 * Math.sin(4 * l * Math.PI / 180);
            return e;
        }

        function sunDeclination(jd) {
            const d = jd - 2451545.0;
            const g = 357.529 + 0.98560028 * d;
            const q = 280.459 + 0.98564736 * d;
            const l = q + 1.915 * Math.sin(g * Math.PI / 180) + 0.020 * Math.sin(2 * g * Math.PI / 180);
            const e = 23.439 - 0.00000036 * d;
            const decl = Math.asin(Math.sin(e * Math.PI / 180) * Math.sin(l * Math.PI / 180)) * 180 / Math.PI;
            return decl;
        }

        function computeTime(angle, prayer, date, eqt, decl) {
            let time = 12;
            
            if (prayer === 'dhuhr') {
                time = 12 - (LNG / 15) + (eqt / 60);
            } else if (prayer === 'asr') {
                const asrAngle = Math.atan(1 / (1 + Math.tan(Math.abs(LAT - decl) * Math.PI / 180))) * 180 / Math.PI;
                const cosH = (Math.sin((90 - asrAngle) * Math.PI / 180) - Math.sin(LAT * Math.PI / 180) * Math.sin(decl * Math.PI / 180)) / (Math.cos(LAT * Math.PI / 180) * Math.cos(decl * Math.PI / 180));
                const h = Math.acos(cosH) * 180 / Math.PI / 15;
                time = 12 + h - (LNG / 15) + (eqt / 60);
            } else {
                const cosH = (Math.sin(-angle * Math.PI / 180) - Math.sin(LAT * Math.PI / 180) * Math.sin(decl * Math.PI / 180)) / (Math.cos(LAT * Math.PI / 180) * Math.cos(decl * Math.PI / 180));
                
                if (Math.abs(cosH) <= 1) {
                    const h = Math.acos(cosH) * 180 / Math.PI / 15;
                    
                    if (prayer === 'fajr') {
                        time = 12 - h - (LNG / 15) + (eqt / 60);
                    } else if (prayer === 'isha') {
                        time = 12 + h - (LNG / 15) + (eqt / 60);
                    } else if (prayer === 'maghrib') {
                        time = 12 + h - (LNG / 15) + (eqt / 60);
                    }
                }
            }
            
            // Adjust for timezone (Singapore is UTC+8)
            time += 8;
            
            // Handle day overflow
            if (time >= 24) time -= 24;
            if (time < 0) time += 24;
            
            return time;
        }

        function formatTime(decimalTime) {
            const hours = Math.floor(decimalTime);
            const minutes = Math.floor((decimalTime - hours) * 60);
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }

        function updateDisplay() {
            const now = new Date();
            const times = calculatePrayerTimes(now);
            
            // Display prayer times
            document.getElementById('fajr').textContent = formatTime(times.fajr);
            document.getElementById('dhuhr').textContent = formatTime(times.dhuhr);
            document.getElementById('asr').textContent = formatTime(times.asr);
            document.getElementById('maghrib').textContent = formatTime(times.maghrib);
            document.getElementById('isha').textContent = formatTime(times.isha);
            
            // Current time
            const currentHours = now.getHours().toString().padStart(2, '0');
            const currentMinutes = now.getMinutes().toString().padStart(2, '0');
            const currentSeconds = now.getSeconds().toString().padStart(2, '0');
            document.getElementById('currentTime').textContent = `${currentHours}:${currentMinutes}:${currentSeconds}`;
            
            // Current date
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-SG', options);
            
            // Find next prayer and update countdown
            const currentTime = now.getHours() + now.getMinutes() / 60 + now.getSeconds() / 3600;
            const prayers = [
                { name: 'Fajr', time: times.fajr, id: 'fajr' },
                { name: 'Dhuhr', time: times.dhuhr, id: 'dhuhr' },
                { name: 'Asr', time: times.asr, id: 'asr' },
                { name: 'Maghrib', time: times.maghrib, id: 'maghrib' },
                { name: 'Isha', time: times.isha, id: 'isha' }
            ];
            
            // Remove all active classes
            prayers.forEach(p => {
                document.getElementById(`${p.id}-item`).classList.remove('active');
            });
            
            let nextPrayer = null;
            for (let prayer of prayers) {
                if (currentTime < prayer.time) {
                    nextPrayer = prayer;
                    break;
                }
            }
            
            // If no prayer found today, next is Fajr tomorrow
            if (!nextPrayer) {
                nextPrayer = prayers[0];
                const timeUntilMidnight = (24 - currentTime) * 3600;
                const timeAfterMidnight = nextPrayer.time * 3600;
                const totalSeconds = timeUntilMidnight + timeAfterMidnight;
                
                const hours = Math.floor(totalSeconds / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = Math.floor(totalSeconds % 60);
                
                document.getElementById('nextPrayerName').textContent = nextPrayer.name;
                document.getElementById('countdown').textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            } else {
                const secondsUntil = (nextPrayer.time - currentTime) * 3600;
                const hours = Math.floor(secondsUntil / 3600);
                const minutes = Math.floor((secondsUntil % 3600) / 60);
                const seconds = Math.floor(secondsUntil % 60);
                
                document.getElementById('nextPrayerName').textContent = nextPrayer.name;
                document.getElementById('countdown').textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById(`${nextPrayer.id}-item`).classList.add('active');
            }
        }

        // Update every second
        updateDisplay();
        setInterval(updateDisplay, 1000);
    </script>
</body>
</html>